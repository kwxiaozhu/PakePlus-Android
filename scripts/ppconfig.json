{"name":"moontv","url":"http://10.0.1.200:3000/","showName":"moontv","appid":"com.moontv.app","icon":"","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"0.0.1","preview":"iPhone","platform":["1-1","1-2","2-1","2-2"],"width":430,"height":932,"desc":"","jsFile":[],"filterCss":"","customJs":"console.log(\n    '%cbuild from PakePlus： https://github.com/Sjj1024/PakePlus',\n    'color:orangered;font-weight:bolder'\n)\n\n// very important, if you don't know what it is, don't touch it\nconst hookClick = (e) => {\n    const origin = e.target.closest('a')\n    const isBaseTargetBlank = document.querySelector(\n        'head base[target=\"_blank\"]'\n    )\n    console.log('origin', origin, isBaseTargetBlank)\n    if (\n        (origin && origin.href && origin.target === '_blank') ||\n        (origin && origin.href && isBaseTargetBlank)\n    ) {\n        e.preventDefault()\n        console.log('handle origin', origin)\n        location.href = origin.href\n    } else {\n        console.log('not handle origin', origin)\n    }\n}\n\nwindow.open = function (url, target, features) {\n    console.log('open', url, target, features)\n    location.href = url\n}\n\ndocument.addEventListener('click', hookClick, { capture: true })\n\n// 配置选项\nconst config = {\n    // 最大初始化等待时间（毫秒）\n    maxInitWait: 10000,\n    // 重试间隔（毫秒）\n    retryInterval: 500,\n    // 调试模式\n    debug: true\n};\n\n// 工具函数：日志记录\nfunction log(...args) {\n    if (config.debug) {\n        console.log('[ArtPlayer AutoFullscreen]', ...args);\n    }\n}\n\n// 主初始化函数\nfunction initAutoFullscreen() {\n    log('脚本已启动，正在寻找ArtPlayer实例...');\n    \n    let player = null;\n    let initAttempts = 0;\n    const maxAttempts = config.maxInitWait / config.retryInterval;\n    \n    // 尝试获取ArtPlayer实例\n    function findPlayer() {\n        // 方法1：通过全局变量查找\n        if (window.artplayer) {\n            player = window.artplayer;\n            log('通过全局变量找到ArtPlayer实例');\n            return true;\n        }\n        \n        // 方法2：通过DOM元素属性查找\n        const playerElements = document.querySelectorAll('[class*=\"artplayer\"]');\n        for (const el of playerElements) {\n            if (el.artplayer) {\n                player = el.artplayer;\n                log('通过DOM属性找到ArtPlayer实例');\n                return true;\n            }\n        }\n        \n        // 方法3：通过特定类名查找\n        const artApp = document.querySelector('.art-video-player');\n        if (artApp && artApp.artplayer) {\n            player = artApp.artplayer;\n            log('通过.artplayer-app类找到ArtPlayer实例');\n            return true;\n        }\n        \n        initAttempts++;\n        return false;\n    }\n    \n    // 重试机制\n    const intervalId = setInterval(() => {\n        if (findPlayer() || initAttempts >= maxAttempts) {\n            clearInterval(intervalId);\n            \n            if (!player) {\n                log('未找到ArtPlayer实例，停止尝试');\n                return;\n            }\n            \n            log('ArtPlayer实例已找到，设置自动全屏');\n            setupAutoFullscreen(player);\n        }\n    }, config.retryInterval);\n}\n\n// 设置自动全屏\nfunction setupAutoFullscreen(player) {\n    // 监听播放事件\n    player.on('play', () => {\n        log('视频开始播放，尝试进入全屏...');\n        \n        try {\n            // 使用ArtPlayer的全屏API\n            if (player.fullscreen && typeof player.fullscreen.toggle === 'function') {\n                player.fullscreen.toggle();\n                log('成功切换全屏状态');\n            } else {\n                log('player.fullscreen.toggle方法不可用');\n            }\n        } catch (e) {\n            log('全屏切换失败:', e);\n        }\n    });\n    \n    // 可选：监听播放器就绪事件\n    player.on('ready', () => {\n        log('播放器准备就绪');\n    });\n    \n    // 可选：添加全屏状态监听\n    player.on('fullscreen', (state) => {\n        log('全屏状态变化:', state);\n    });\n}\n\n// 启动脚本\nif (document.readyState === 'complete' || document.readyState === 'interactive') {\n    initAutoFullscreen();\n} else {\n    window.addEventListener('DOMContentLoaded', initAutoFullscreen);\n}","isHtml":false,"htmlPath":"","htmlFiles":[],"more":{"windows":{"label":"","title":"","url":"http://10.0.1.200:3000/","userAgent":"Mozilla/5.0 (iPhone; CPU iPhone OS 17_0_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Mobile/15E148 Safari/604.1","width":430,"height":932,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false}},"phone":{"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"moontv","showName":"moontv","version":"0.0.1","webUrl":"http://10.0.1.200:3000/","id":"com.moontv.app.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false},"android":{"name":"moontv","showName":"moontv","version":"0.0.1","webUrl":"http://10.0.1.200:3000/","id":"com.moontv.app.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false},"desktop":{"name":"moontv","showName":"moontv","version":"0.0.1","id":"com.moontv.app.desktop","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途，否则后果自负）","webUrl":"http://10.0.1.200:3000/","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途，否则后果自负）","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"cloud","debug":false}}